# Technical Invariants

## Critical Rules

- **ALWAYS use `.venv/bin/python -m ...`** - Never global Python
- **ALWAYS run quality gates before commit** - ruff, mypy, pytest
- **Artifacts in `.repomap/`** - Generated by `repomap generate .`

repomap-core is **core-only**: no claims pipeline is required for default development or CI parity.

## Environment Variables

### Required

**None** for default local quality gates.

### Optional

- `SONARQUBE_TOKEN` - SonarQube MCP tooling (only if using SonarQube integration)

- `WEAVIATE_URL`, `WEAVIATE_API_KEY` - For semantic search

## Quality Gates (CI Parity)

```bash
.venv/bin/python -m ruff format --check .
.venv/bin/python -m ruff check .
.venv/bin/python -m mypy src
.venv/bin/python -m pytest -q
```

## MCP Servers

1. **context7** - Library documentation
2. **augment-context-engine** - Semantic codebase search
3. **sequentialthinking** - Structured reasoning
4. **sonarqube** - Code quality metrics

## References

- Package manifest: `pyproject.toml`
- Repomap config: `repomap.toml`
- Layer definitions: `repomap.toml` (source of truth)
- Full tech stack: See `pyproject.toml` dependencies
